#with python3

pip3 install spacy
python3 -m spacy download en_core_web_sm
pip3 install textblob
pip3 install nltk
pip3 install transformers
pip3 install torch
pip3 install tensorflow
pip3 install flax


##
#Clean up text then create a summarization

from textblob import TextBlob
import spacy
from spacy.lang.en.stop_words import STOP_WORDS
import nltk
import transformers

#clean up text
# Importing the required libraries
import re


'''
# Read the text file on a pi
with open("/home/pi/somefile.txt", "r") as file:
    text = file.read()
'''




#import from desktop/Textfile
with open("/Users/nyk/Desktop/Textfiles/god.txt", "r") as file:
    text = file.read()
    
    
#text = "something"

# Removing unwanted characters
text = re.sub(r'[^\x00-\x7F]+', ' ', text) # Removing non-ASCII characters
text = re.sub(r'[^\w\s]', '', text) # Removing punctuation
text = re.sub(r'\s+', ' ', text) # Removing extra whitespaces

# Converting the text to lowercase
text = text.lower()


# Loading the spaCy NLP model
nlp = spacy.load("en_core_web_sm")

# The text to be summarized
#text = "its not only about the numbers financial sacrifice thats not a phrase you hear much in the personal finance world thats because for the most part personal finance specialists and planners are focused on increasing assets with an eye on a longterm time horizon retirement in that world the concept of financial sacrifice doesnt really fit schlesinger believes the pandemic has changed that because investors have been made acutely aware that they may not make it to retirement and its a good idea to think about how to enjoy some of that money now to factor that into the financial planning process schlesinger says advisors are going to have to get to know their clients better whats hard for a lot of financial planners is they dont like to get into the emotional stuff schlesinger says the best and most expensive planners do of course they see their clients as complex human beings who have diverse needs and messy lives most of the financial services industry however is geared towards treating people as widgets that are expected to have a certain life span punctuated by a specific retirement point theres not much room for the human factor there schlesinger says good financial planners were already turning against that approach before the pandemic hit they realize that you cannot just hand a client a list and say please populate the assets liabilities income expenses schlesinger says you actually have to learn about who they are and i think that the pandemic has accelerated that trend the reserve fund is the most important thing schlesinger says that before the pandemic she would give people some pretty standard advice about their money she would start by telling them about the three mainstays of personal finance i would say to people youre just starting out heres what you have to do you need an emergency reserve fund you need to pay off your debt and you need to try to put money into retirement and i would often give those things equal weight people saw the wisdom of paying off debt and saving for retirement of course the emergency reserve fund that" 

# Perform sentiment analysis using TextBlob
text_sentiment = TextBlob(text).sentiment.polarity

# Parsing the text using spaCy NLP model
doc = nlp(text)

# Define a word limit for summarization
word_limit = 300

# Generating summary using spaCy NLP model
summary = []
for sent in doc.sents:
    if len(summary) + len(sent.text.split()) <= word_limit:
        # Check the sentiment of each sentence
        sent_sentiment = TextBlob(sent.text).sentiment.polarity
        # Only include sentences with sentiment greater than 0
        if sent_sentiment > 0:
            summary.append(sent.text)

# Joining the list of sentences to create a summarized text
summary = " ".join(summary)

print("Original Text:\n", text, "\n")
print("Summary:\n", summary)

